import streamlit as st
import urllib.parse

# ุฅุนุฏุงุฏุงุช ุงูุชูุณูู ูุงูุฃููุงู
st.set_page_config(page_title="ุญูุจุงูู ุฅุฎูุงู - ุงูุทูุจูุฉ ุงููุงููุฉ", layout="wide")

st.markdown("""
    <style>
    .stApp { background-color: #0E1117; }
    .category-header { 
        background-color: #e9ecef; color: #1E3A8A; padding: 10px; border-radius: 5px; 
        font-weight: bold; margin-top: 20px; border-right: 8px solid #fca311; text-align: right; font-size: 20px;
    }
    .item-box { 
        color: white !important; font-weight: bold !important; font-size: 16px !important; 
        background-color: #1E3A8A !important; padding: 10px; border-radius: 8px; text-align: right; width: 100%;
    }
    input { background-color: #ffffcc !important; color: black !important; font-weight: bold !important; font-size: 20px !important; }
    .header-box { background-color: #1E3A8A; color: white; text-align: center; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
    .stButton button { background-color: #fca311; color: #1E3A8A !important; font-weight: bold; height: 50px; width: 100%; font-size: 18px; }
    .review-panel { background-color: #1c212d; border: 2px solid #fca311; padding: 15px; border-radius: 10px; color: white; }
    </style>
    """, unsafe_allow_html=True)

if 'page' not in st.session_state: st.session_state.page = 'home'
if 'cart' not in st.session_state: st.session_state.cart = {}
if 'customer' not in st.session_state: st.session_state.customer = ""

RECEIVING_NUMBER = "9613220893"

def ar_to_en(text):
    return text.translate(str.maketrans('ููกูขูฃูคูฅูฆูงูจูฉ', '0123456789'))

def render_items(items_dict, prefix):
    for disp, bill in items_dict.items():
        if disp.startswith("-"):
            st.markdown(f'<div class="category-header">{disp[1:]}</div>', unsafe_allow_html=True)
        else:
            col_txt, col_in = st.columns([3, 1])
            with col_txt: st.markdown(f'<div class="item-box">{disp}</div>', unsafe_allow_html=True)
            with col_in:
                val = st.text_input("", key=f"{prefix}_{bill}", label_visibility="collapsed", placeholder="0")
                if val:
                    qty = ar_to_en(val)
                    if qty.isdigit() and int(qty) > 0:
                        st.session_state.cart[bill] = qty
                    elif qty == "0" and bill in st.session_state.cart:
                        del st.session_state.cart[bill]

# --- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ---
if st.session_state.page == 'home':
    st.markdown('<div class="header-box"><h1>ุทูุจูุงุช ุญูุจุงูู ุฅุฎูุงู</h1></div>', unsafe_allow_html=True)
    st.session_state.customer = st.text_input("๐ค ุงุณู ุงูุฒุจูู / ุงูููุฏูุจ:", st.session_state.customer)

    if st.session_state.cart:
        with st.container():
            st.markdown('<div class="review-panel"><h3>๐ ูุฑุงุฌุนุฉ ุงูุทูุจูุฉ (ุงูุฃุณูุงุก ุงูุชูููุฉ):</h3>', unsafe_allow_html=True)
            for bill, qty in st.session_state.cart.items():
                st.write(f"โ {bill} โ ุงููููุฉ: {qty}")
            
            if st.button("๐ ุฅุฑุณุงู ุนุจุฑ ูุงุชุณุงุจ"):
                if not st.session_state.customer:
                    st.error("ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงุณู ุงูุฒุจูู!")
                else:
                    msg = f"ุทูุจูุฉ: *{st.session_state.customer}*\n" + "="*15 + "\n"
                    for bill, qty in st.session_state.cart.items():
                        msg += f"{bill} : {qty}\n"
                    st.markdown(f'<a href="https://api.whatsapp.com/send?phone={RECEIVING_NUMBER}&text={urllib.parse.quote(msg)}" target="_blank" style="text-decoration:none;"><button style="width:100%; background-color:#25d366; color:white; padding:15px; border-radius:10px; border:none; font-weight:bold;">ุชุฃููุฏ ููุชุญ ูุงุชุณุงุจ โ</button></a>', unsafe_allow_html=True)
            st.markdown('</div>', unsafe_allow_html=True)

    st.write("---")
    c1, c2 = st.columns(2)
    with c1: 
        if st.button("๐พ ุงูุญุจูุจ (ูู ุงูุฃูุฒุงู)"): st.session_state.page = 'grains_page'; st.rerun()
    with c2:
        if st.button("๐ถ๏ธ ุงูุจูุงุฑุงุช (ูู ุงูุฃูุฒุงู)"): st.session_state.page = 'spices_page'; st.rerun()

# --- ุตูุญุฉ ุงูุญุจูุจ ุงููุงููุฉ (ุชูุฑูุบ ุงูุตูุฑ 1, 7, 8 ุญุฑููุงู) ---
elif st.session_state.page == 'grains_page':
    st.markdown('<div class="header-box"><h2>ูุงุฆูุฉ ุงูุญุจูุจ (1000ุบ - 500ุบ - 200ุบ)</h2></div>', unsafe_allow_html=True)
    
    grains_data = {
        "-ูุณู ุงูุญูุต ูุงูููู (1000ุบ/907ุบ)": "",
        "ุญูุต ูุญูู 12": "ุญูุต ูุญูู\"12\"907ุบ", "ุญูุต ูุญูู 9": "ุญูุต ูุญูู\"9\"907ุบ", "ุญูุต ูุณุฑ": "ุญูุต ูุณุฑ 1000ุบ",
        "ููู ุญุจ": "ููู ุญุจ 1000ุบ", "ููู ูุฌุฑูุด": "ููู ูุฌุฑูุด 1000ุบ", "ููู ุนุฑูุถ": "ููู ุนุฑูุถ 1000ุบ",
        "-ูุณู ุงููุงุตูููุง (1000ุบ/907ุบ)": "",
        "ูุงุตูููุง ุตููุจุฑูุฉ": "ูุงุตูููุง ุตููุจุฑูุฉ 907ุบ", "ูุงุตูููุง ุญูุฑุง ุทูููุฉ": "ูุงุตูููุง ุญูุฑุง ุทูููุฉ 1000ุบ",
        "ูุงุตูููุง ุญูุฑุง ูุฏุนุจูุฉ": "ูุงุตูููุง ุญูุฑุง ูุฏุนุจูุฉ 1000ุบ", "ูุงุตูููุง ุนุฑูุถุฉ": "ูุงุตูููุง ุนุฑูุถุฉ 1000ุบ",
        "-ูุณู ุงูุนุฏุณ ูุงูุจุฑุบู (1000ุบ/907ุบ)": "",
        "ุนุฏุณ ุฃุจูุถ ุจูุฏู": "ุนุฏุณ ุฃุจูุถ ุจูุฏู 907ุบ", "ุนุฏุณ ุฃุญูุฑ": "ุนุฏุณ ุฃุญูุฑ 907ุบ", "ุนุฏุณ ุฃุญูุฑ ููุฑุฏู": "ุนุฏุณ ุฃุญูุฑ ููุฑุฏู 1000ุบ",
        "ุนุฏุณ ุนุฑูุถ": "ุนุฏุณ ุนุฑูุถ 907ุบ", "ุนุฏุณ ูุฌุฑูุด": "ุนุฏุณ ูุฌุฑูุด 907ุบ",
        "ุจุฑุบู ุฃุณูุฑ ูุงุนู": "ุจุฑุบู ุฃุณูุฑ ูุงุนู 907ุบ", "ุจุฑุบู ุฃุณูุฑ ุฎุดู": "ุจุฑุบู ุฃุณูุฑ ุฎุดู 907ุบ",
        "ุจุฑุบู ุฃุจูุถ ูุงุนู": "ุจุฑุบู ุฃุจูุถ ูุงุนู 1000ุบ", "ุจุฑุบู ุฃุจูุถ ุฎุดู": "ุจุฑุบู ุฃุจูุถ ุฎุดู 907ุบ",
        "-ูุณู ุงูุฃุฑุฒ ูุงูุณูุฑ (1000ุบ/907ุบ)": "",
        "ุฃุฑุฒ ุฃูุฑููู": "ุฃุฑุฒ ุฃูุฑููู 907ุบ", "ุฃุฑุฒ ุฅูุทุงูู": "ุฃุฑุฒ ุฅูุทุงูู 907ุบ", "ุฃุฑุฒ ูุตุฑู": "ุฃุฑุฒ ูุตุฑู 907ุบ",
        "ุฃุฑุฒ ูุงุนู": "ุฃุฑุฒ ูุงุนู 1000ุบ", "ุฃุฑุฒ ุจุณูุชู": "ุฃุฑุฒ ุจุณูุชู 907ุบ", "ุฃุฑุฒ ุนูุจุฑู": "ุฃุฑุฒ ุนูุจุฑู 1000ุบ",
        "ุณูุฑ ุฃุณูุฑ": "ุณูุฑ ุฃุณูุฑ 1000ุบ", "ุณูุฑ ุญุจ": "ุณูุฑ ุญุจ 907ุบ", "ุณูุฑ ูุงุนู": "ุณูุฑ ูุงุนู 1000ุบ",
        "-ูุณู ุงูุทุญูู ูุงูุณููุฏ (1000ุบ/907ุบ)": "",
        "ุทุญูู ุฒูุฑู": "ุทุญูู ุฒูุฑู 1000ุบ", "ุทุญูู ุบูุฏ ููุฏู": "ุทุญูู ุบูุฏ ููุฏู1ู", "ุทุญูู ุบูุฏ ูุงุฑู": "ุทุญูู ุบูุฏ ูุงุฑู 907ุบ",
        "ุทุญูู ููุด": "ุทุญูู ููุด 1000ุบ", "ุทุญูู ุฃุณูุฑ": "ุทุญูู ุฃุณูุฑ 1000ุบ", "ุทุญูู ุฐุฑุฉ": "ุทุญูู ุฐุฑุฉ 1000ุบ",
        "ุทุญูู ูุฑุฎุฉ": "ุทุญูู ูุฑุฎุฉ 907ุบ", "ุณููุฏ": "ุณููุฏ 907ุบ", "ููุญ ููุดูุฑ": "ููุญ ููุดูุฑ 907ุบ",
        "-ุฃุตูุงู ูุชููุนุฉ (1000ุบ)": "",
        "ุชุฑูุณ ุญูู": "ุชุฑูุณ ุญูู 1000ุบ", "ุชุฑูุณ ูุฑ": "ุชุฑูุณ ูุฑ 1000ุบ", "ุฐุฑุฉ ุจูุดุงุฑ": "ุฐุฑุฉ ุจูุดุงุฑ 1000ุบ",
        "ุฐุฑุฉ ูุฌุฑูุดุฉ": "ุฐุฑุฉ ูุฌุฑูุดุฉ 1000ุบ", "*ูุดู ุจูุฏู 1000": "*ูุดู ุจูุฏู 1000ุบ", "*ูุงููููุง 1000": "*ูุงููููุง 1000ุบ",
        "*ุจุงููุบ ุจูุฏุฑ 1000": "*ุจุงููุบ ุจูุฏุฑ 1000ุบ", "ูุดุงุก ูุงุนู": "ูุดุงุก ูุงุนู 1000ุบ", "ูุดุงุก ุญุจ": "ูุดุงุก ุญุจ 1000ุบ",
        "*ูุนู ูุทุญูู 1000": "*ูุนู ูุทุญูู 1000ุบ", "*ูุฑูู ูุฌุฑูุด 1000": "*ูุฑูู ูุฌุฑูุด 1000ุบ", "*ุจููุฑุจููุงุช 1000": "*ุจููุฑุจููุงุช 1000ุบ",
        "*ุญุงูุถ ุงูููููู 1000": "*ุญุงูุถ ุงูููููู 1000ุบ", "ูุบุฑุจูุฉ 907": "ูุบุฑุจูุฉ 907ุบ*",
        "-ูุณู 500ุบ ู 454ุบ (ุงูุตูุฑุฉ 8)": "",
        "ูุงุตูููุง ุนุฑูุถุฉ 500": "ูุงุตูููุง ุนุฑูุถุฉ500ุบ", "ููู ุนุฑูุถ 500": "ููู ุนุฑูุถ500ุบ", "*ูุงูุงู 500": "*ูุงูุงู500ุบ",
        "ุชุฑูุณ ุญูู 500": "ุชุฑูุณ ุญูู500ุบ", "ุชุฑูุณ ูุฑ 500": "ุชุฑูุณ ูุฑ500ุบ", "ุฐุฑุฉ ุจูุดุงุฑ 454": "ุฐุฑุฉ ุจูุดุงุฑ454ุบ",
        "ุฐุฑุฉ ูุฌุฑูุดุฉ 500": "ุฐุฑุฉ ูุฌุฑูุดุฉ500ุบ", "ุดููุงู ูุจุฑูุด 500": "ุดููุงู ูุจุฑูุด500ุบ", "*ูุฑูู ูุฌุฑูุด 500": "*ูุฑูู ูุฌุฑูุด500ุบ",
        "*ูุดู ุจูุฏู 500": "*ูุดู ุจูุฏู 500ุบ", "*ูุนู ูุทุญูู 500": "*ูุนู ูุทุญูู 500ุบ", "ุณูุฑ ูุงุนู 500": "ุณูุฑ ูุงุนู500ุบ",
        "*ุณูุฑ ูุจุงุช 500": "*ุณูุฑ ูุจุงุช*500ุบ", "ุจุฑุด ุฌูุฒ ุงูููุฏ 500": "ุจุฑุด ุฌูุฒ ุงูููุฏ500ุบ", "ูุดุงุก ุญุจ 500": "ูุดุงุก ุญุจ500ุบ",
        "ูุดุงุก ูุงุนู 500": "ูุดุงุก ูุงุนู500ุบ", "ุฃุฑุฒ ูุงุนู 500": "ุฃุฑุฒ ูุงุนู500ุบ", "ุณูุฑ ุฃุณูุฑ 500": "ุณูุฑ ุฃุณูุฑ500ุบ",
        "ุณูุณู ููุดูุฑ 500": "ุณูุณู ููุดูุฑ 500ุบ", "*ุณูุณู ูุญูุต 500": "*ุณูุณู ูุญูุต 500ุบ", "*ุณูุณู ุจูุฏู 500": "*ุณูุณู ูุญูุต ุจูุฏู 500ุบ",
        "ุฒุนุชุฑ ูุญูุฌ 500": "ุฒุนุชุฑ ูุญูุฌ* 500ุบ", "ุฒุนุชุฑ ุงูุณุชุฑุง 500": "ุฒุนุชุฑ ูุญูุฌ \"ุงูุณุชุฑุง\" 500ุบ*", "ุฒุนุชุฑ ุญูุจู 500": "*ุฒุนุชุฑ ุญูุจู 500ุบ",
        "-ูุณู 200ุบ ู 100ุบ (ุงูุตูุฑุฉ 8-9)": "",
        "ูููุฎูุฉ 500": "ูููุฎูุฉ 500ุบ", "ูููุฎูุฉ 200": "ูููุฎูุฉ 200ุบ", "ุจุงููุฉ ุฒูุฑุฉ 200": "ุจุงููุฉ ุฒูุฑุฉ 200ุบ",
        "*ูุนู ูุทุญูู 200": "*ูุนู ูุทุญูู 200ุบ", "ูุดุงุก ูุงุนู 200": "ูุดุงุก ูุงุนู 200ุบ", "ูุดุงุก ุญุจ 200": "ูุดุงุก ุญุจ 200ุบ",
        "*ูุงูุงู ุฃุณูุฏ 200": "*ูุงูุงู ุฃุณูุฏ 200ุบ", "ุณูุณู ููุดูุฑ 200": "ุณูุณู ููุดูุฑ 200ุบ", "*ูุดู ุจูุฏู 200": "*ูุดู ุจูุฏู 200ุบ",
        "*ููุงูู ุฌุงูุฒุฉ ุนูุจ": "*ููุงูู ุฌุงูุฒุฉ  \"ุนูุจ\"", "ุณูุฑ ูุจุงุช 200": "ุณูุฑ ูุจุงุช* 200ุบ", "ุณูุฑ ูุจุงุช 100": "ุณูุฑ ูุจุงุช* 100ุบ",
        "ุฒููุฑุงุช 100": "ุฒููุฑุงุช 100ุบ*", "ุจุงุจููุฌ 100": "ุจุงุจููุฌ 100ุบ*", "ููุญ ูุงุนู 700": "ููุญ ูุงุนู 24*700",
        "ููุญ ูุงุนู 3ููุบ": "ููุญ ูุงุนู  3 ููุบ *6", "ููุญ ุฎุดู 1ููุบ": "*ููุญ ุฎุดู  1ููุบ *12", "ูุณูุฉ ูุฑุชูู": "\"ูุณูุฉ*25  \"ูุฑุชูู"
    }
    render_items(grains_data, "GR")
    if st.button("๐ ุญูุธ ูุงูุนูุฏุฉ"): st.session_state.page = 'home'; st.rerun()

# --- ุตูุญุฉ ุงูุจูุงุฑุงุช ุงููุงููุฉ (ุชูุฑูุบ ุงูุตูุฑ 4, 5, 6 ุญุฑููุงู) ---
elif st.session_state.page == 'spices_page':
    st.markdown('<div class="header-box"><h2>ูุงุฆูุฉ ุงูุจูุงุฑุงุช (500ุบ - 50ุบ - 20ุบ)</h2></div>', unsafe_allow_html=True)
    
    with st.expander("๐ถ๏ธ ุจูุงุฑุงุช 50ุบ (ุจุงูุฏุฒููุฉ - ุงูุตูุฑุฉ 4 ู 9)", expanded=True):
        sp_50_full = {
            "ุจูุงุฑ ุญูู": "*ุจูุงุฑ ุญูู 50ุบ*12", "ูููู ุฃุณูุฏ": "*ูููู ุฃุณูุฏ 50ุบ*12", "ูููู ุฃุญูุฑ": "*ูููู ุฃุญูุฑ 50ุบ*12",
            "ูุฑูุฉ ูุงุนูุฉ": "*ูุฑูุฉ ูุงุนูู 50ุบ*12", "ุณุจุน ุจูุงุฑุงุช": "*ุณุจุน ุจูุงุฑุงุช 50ุบ*12", "ุนูุฏุฉ ุตูุฑุฉ": "*ุนูุฏุฉ ุตูุฑุฉ50ุบ*12",
            "ุฏูุฉ ูุจู": "*ุฏูุฉ ูุจู 50ุบ*12", "ุฏูุฉ ูุนู": "*ุฏูุฉ ูุนู 50ุบ*12", "ูููู": "*ูููู 50ุบ*12",
            "ูุฒุจุฑุฉ": "*ูุฒุจุฑุฉ 50ุบ*12", "ูุฑุงููุฉ": "*ูุฑุงููุฉ 50ุบ*12", "ูุงุฑู": "*ูุงุฑู 50ุบ*12",
            "ูุงูุณูู": "*ูุงูุณูู 50ุบ*12", "ุณูุงู": "*ุณูุงู 50ุบ*12", "ุญุงูุถ": "*ุญุงูุถ 50ุบ*12",
            "ุจูุงุฑ ุฃุฑุฒ": "*ุจูุงุฑ ุฃุฑุฒ 50ุบ*12", "ูููููุฉ ุญููุฉ": "*ูููููุฉ ุญููุฉ 50ุบ*12", "ุซูู ูุฌูู": "*ุซูู ูุฌูู 50ุบ*12",
            "ุจุตู ูุฌูู ุจูุฏุฑุฉ": "*ุจุตู ูุฌูู ุจูุฏุฑุฉ 50ุบ*12", "ุดููุฑ": "*ุดููุฑ 50ุบ*12", "ุจูุงุฑ ููุงูู": "*ุจูุงุฑ ููุงูู 50ุบ*12",
            "ุจูุงุฑ ูุบุฑุจูุฉ": "*ุจูุงุฑ ูุบุฑุจูุฉ 50ุบ*12", "ุจูุงุฑ ูุจุณุฉ": "*ุจูุงุฑ ูุจุณุฉ 50ุบ*12", "ุจูุงุฑ ููุงูู": "*ุจูุงุฑ ููุงูู 50ุบ*12",
            "ุจูุงุฑ ููุจุฑุบุฑ": "*ุจูุงุฑ ููุจุฑุบุฑ 50ุบ*12", "ุจูุงุฑ ุดูุฑูุง ูุญู": "*ุจูุงุฑ ุดูุฑูุง ูุญู 50ุบ*12", "ุจูุงุฑ ุดูุฑูุง ุฏุฌุง": "*ุจูุงุฑ ุดูุฑูุง ุฏุฌุง 50ุบ*12ุฌ",
            "ุจูุงุฑ ุฏุฌุงุฌ": "*ุจูุงุฑ ุฏุฌุงุฌ 50ุบ*12", "ุจูุงุฑ ุทุงููู": "*ุจูุงุฑ ุทุงููู 50ุบ*12", "ุฎูุทุฉ ุญูุจุงูู ุงููููุฒุฉ": "*ุฎูุทุฉ ุญูุจุงูู ุงููููุฒุฉ 50ุบ*12",
            "ูุฑู ุบุงุฑ": "*ูุฑู ุบุงุฑ 50ุบ*12", "ุฅูููู ุงูุฌุจู": "*ุฅูููู ุงูุฌุจู 50ุบ*12", "ุจูุงุฑ ูุณููุณ": "*ุจูุงุฑ ูุณููุณ 50ุบ*12",
            "-ุฃุตูุงู ุญุจ 50ุบ": "",
            "ุจูุงุฑ ุญูู ุญุจ": "*ุจูุงุฑ ุญูู ุญุจ 50ุบ*12", "ูููู ุฃุณูุฏ ุญุจ": "*ูููู ุฃุณูุฏ ุญุจ 50ุบ*12", "ูููู ุญุจ": "*ูููู ุญุจ 50ุบ*12",
            "ูุฒุจุฑุฉ ุญุจ": "*ูุฒุจุฑุฉ ุญุจ 50ุบ*12", "ูุงูุณูู ุญุจ": "*ูุงูุณูู ุญุจ 50ุบ*12", "ุญุจุฉ ุงูุจุฑูุฉ ุญุจ": "*ุญุจุฉ ุงูุจุฑูุฉ ุญุจ 50ุบ*12"
        }
        render_items(sp_50_full, "SP50")

    with st.expander("๐ฟ ุจูุงุฑุงุช 500ุบ (ุงูุตูุฑุฉ 5 ู 6)"):
        sp_500_full = {
            "ุจูุงุฑ ุญูู 500": "*ุจูุงุฑ ุญูู 500ุบ", "ูููู ุฃุณูุฏ 500": "*ูููู ุฃุณูุฏ 500ุบ", "ูุฑูุฉ 500": "*ูุฑูุฉ 500ุบ",
            "ุณุจุน ุจูุงุฑุงุช 500": "*ุณุจุน ุจูุงุฑุงุช 500ุบ", "ุนูุฏุฉ ุตูุฑุฉ 500": "*ุนูุฏุฉ ุตูุฑุฉ 500ุบ", "ูููู ูุงุนู 500": "ูููู ูุงุนู 500ุบ*",
            "ุจูุงุฑ ุฃุฑุฒ 500": "*ุจูุงุฑ ุฃุฑุฒ 500ุบ", "ุซูู ูุฌูู 500": "ุซูู ูุฌูู 500ุบ", "ุจุตู ูุฌูู ุจูุฏุฑุฉ 500": "*ุจุตู ูุฌูู ุจูุฏุฑุฉ 500ุบ",
            "ุจูุงุฑ ููุงูู 500": "*ุจูุงุฑ ููุงูู 500ุบ", "ุจูุงุฑ ุดูุฑูุง ุฏุฌุงุฌ 500": "*ุจูุงุฑ ุดูุฑูุง ุฏุฌุงุฌ 500ุบ", "ุจูุงุฑ ุฏุฌุงุฌ 500": "*ุจูุงุฑ ุฏุฌุงุฌ 500ุบ"
        }
        render_items(sp_500_full, "SP500")

    if st.button("๐ ุญูุธ ูุงูุนูุฏุฉ"): st.session_state.page = 'home'; st.rerun()
